<!doctype html>
<html lang="en">
<head><meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1" />
<meta content='text/html; charset=utf-8' http-equiv='content-type' />

  <title>Get DMA, PLL with 48 MHz, 4 KB RAM, and 32 KB flash memory for PY32F002Ax5 chips - HexRx</title>
  <meta content='Get DMA, PLL with 48 MHz, 4 KB RAM, and 32 KB flash memory for PY32F002Ax5 chips - HexRx' property='title' />
  <meta content='Get DMA, PLL with 48 MHz, 4 KB RAM, and 32 KB flash memory for PY32F002Ax5 chips - HexRx' property='og:title' />


<meta property="og:description" content="It seems that most Chinese chips PUYA PY32F002Ax5 have the core from PY32F030x6 chips inside, which gives undocumented features like DMA support, PLL with the ability to run chip on 48 MHz, additional timers like TIM3, and 4 KB RAM with 32 KB flash.
How to check if you PY32F002Ax5 has more memory There you have several options:
Build and flash this code to test RAM and flash https://github.com/IOsetting/py32f0-template/tree/main/Examples/PY32F0xx/HAL/Test/PY32F002A_32KF_4KR Create an empty 32kb binary file in your preferred hex editor (or use the online hex editor https://hexed." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://hexrx.github.io/posts/get-dma-pll-with-48mhz-4kb-ram-and-32kb-flash-memory-for-py32f002ax5-chips/" />


<meta property="article:published_time" content="2024-10-18T21:25:46&#43;03:00"/>

<meta property="article:modified_time" content="2024-10-18T21:25:46&#43;03:00"/>








<meta name="generator" content="Hugo 0.121.1">

<link href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:400,600" rel="stylesheet">
<style type="text/css">/*https://coolors.co/afd5aa-f0f2ef-a69f98-3d3d3d-8c6057*/
:root {
  --main-color: #8C6056; 
  --secondary-color: #AFD5AA;
  --logo-text-color: #fff;
  --body-text-color: #3d3d3d;
  --heading-text-color: #383838;
  --background-color: #fff;
}</style>
<link href='/css/tachyons.min.css' rel="stylesheet">
<link href='/css/styles.css' rel="stylesheet">


<link rel="icon" 
 
  href='/favicon.ico'

type="image/x-icon"/>

<link href='/feed.xml' rel="alternate" type="application/atom+xml" title="HexRx" />

<script>
var doNotTrack = false;
if (!doNotTrack) {
	window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
	ga('create', 'G-F8HK5X7GEB', 'auto');
	
	ga('send', 'pageview');
}
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>
</head>
<body class="global-font">
  <nav class=" justify-between border-box pa3 pl3-l pr2-l mt1 mt0-ns" id="navbar">
  <div class="flex">
    <a class="f4 fw6 ttu no-underline dim bg-main-color pv1 ph2 br2" id="site-title" href='/' title="Home">HexRx</a>
  </div>
  
</nav>
  
<main class="center mv4 content-width ph3">
  <div class="f3 fw6 heading-color heading-font post-title">Get DMA, PLL with 48 MHz, 4 KB RAM, and 32 KB flash memory for PY32F002Ax5 chips</div>
  <p class="silver f6 mt1 mb4 post-meta">
    <time>18 Oct 2024</time> 
     | 
    
    
    tags: [ <a href='/tags/py32' class="link silver">PY32</a> <a href='/tags/notes' class="link silver">Notes</a>  ]
    
  </p>
  <div class="lh-copy post-content"><p>It seems that most Chinese chips PUYA PY32F002Ax5 have the core from PY32F030x6 chips inside, which gives undocumented features like DMA support, PLL with the ability to run chip on 48 MHz, additional timers like TIM3, and 4 KB RAM with 32 KB flash.</p>
<h3 id="how-to-check-if-you-py32f002ax5-has-more-memory">How to check if you PY32F002Ax5 has more memory</h3>
<p>There you have several options:</p>
<ol>
<li>Build and flash this code to test RAM and flash <a href="https://github.com/IOsetting/py32f0-template/tree/main/Examples/PY32F0xx/HAL/Test/PY32F002A_32KF_4KR">https://github.com/IOsetting/py32f0-template/tree/main/Examples/PY32F0xx/HAL/Test/PY32F002A_32KF_4KR</a></li>
<li>Create an empty 32kb binary file in your preferred hex editor (or use the online hex editor <a href="https://hexed.it">https://hexed.it</a>), put some bytes to the end of the file, flash the file to the chip, then verify those bytes by reading the firmware back.</li>
</ol>
<h3 id="how-to-unlock-hidden-features-of-py32f002ax5">How to unlock hidden features of PY32F002Ax5</h3>
<p>If you&rsquo;re using the HAL and LL libraries from the repository <a href="https://github.com/IOsetting/py32f0-template">https://github.com/IOsetting/py32f0-template</a>, you just need to modify Makefile, change:
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>MCU_TYPE <span style="color:#f92672">=</span> PY32F002Ax5</span></span></code></pre></div>
to
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>MCU_TYPE <span style="color:#f92672">=</span> PY32F003x6</span></span></code></pre></div>
and recompile the entire project.</p>
<h3 id="already-tested-chips">Already tested chips</h3>
<h4 id="py32f002aa15m6tu">PY32F002AA15M6TU</h4>
<p>I tested the small one PY32F002AA15M6TU in ESSOP10 package (btw it costs only 15 cents).
<img src="images/PY32F002AA15M6TU.avif" alt="PY32F002AA15M6TU"></p>
<blockquote>
<p>The original source of the image is LCSC <a href="https://www.lcsc.com/product-detail/Microcontroller-Units-MCUs-MPUs-SOCs_PUYA-PY32F002AA15M6TU_C5292058.html">https://www.lcsc.com/product-detail/Microcontroller-Units-MCUs-MPUs-SOCs_PUYA-PY32F002AA15M6TU_C5292058.html</a></p>
</blockquote>
<p>According to the datasheet, the chip has 3 KB of RAM and 20 KB of flash memory with a maximum core frequency of 24 MHz. I tested 4 KB RAM and 32 KB flash and they work fine. Also, I was able to use ADC with DAM, use TIM3 (which the PY32F002A shouldn&rsquo;t have, only TIM1 and TIM16), and run the chip with PLL and 48 MHz frequency.</p>
<h4 id="py32f002af15p">PY32F002AF15P</h4>
<p>There is an article <a href="https://www.cnblogs.com/milton/p/17052963.html">https://www.cnblogs.com/milton/p/17052963.html</a> from a Chinese guy who tested this chip. He tested 4 KB RAM and 32 KB flash, ADC with DMA, and PLL with 48 MHz.</p>
<p>References:</p>
<p><a href="https://www.cnblogs.com/milton/p/17052963.html">https://www.cnblogs.com/milton/p/17052963.html</a>
<a href="https://github.com/wagiminator/Development-Boards/tree/main/PY32F002AF15P_DevBoard#unofficial-additional-features">https://github.com/wagiminator/Development-Boards/tree/main/PY32F002AF15P_DevBoard#unofficial-additional-features</a></p>
</div>
</main>
 






<div class="tl fixed list-pages lh-copy" id="contents-list"></div>



<div class="pagination tc tr-l db fixed-l bottom-2-l right-2-l mb3 mb0-l">
  
<a id="scroll-to-top" class="f6 o-0 link br2 ph2 pv1 mb1 bg-main-color pointer" onclick="topFunction()" style="color: #fff; visibility: hidden; display: none; transition: opacity .5s, visibility .5s;" title="back to top">back to top</a>
<br>
  <p class="mb0 mt2">
  <a href="https://hexrx.github.io/posts/ubuntu-laptop-intel-wireless-ac8262-wake-up-from-suspend-with-bluetooth-disabled/">prev post</a>
  
  </p>
</div>

  <footer class="content-width mt0 mt5-l mb4 f6 center ph3 gray tc tl-l">
  <hr class="dn db-l ml0-l gray w3"><br>
  Powered by <a href="https://gohugo.io/" target="_blank" class="link gray dim">Hugo</a>, based on the <a href="https://github.com/lingxz/er" target="_blank" class="link gray dim">Er</a> theme. <br>
  Copyright Â© 2023 HexRx
</footer>
  



<script src="https://cdnjs.cloudflare.com/ajax/libs/tocbot/4.4.2/tocbot.min.js"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/tocbot/4.4.2/tocbot.css">
<style>.is-active-link::before { background-color: var(--secondary-color); }</style>




<script type="text/javascript">
var prevScrollpos = window.pageYOffset;
window.onscroll = function() {
  var currentScrollPos = window.pageYOffset;

  
  if (document.getElementById("tag-cloud") !== null) { 
    if (prevScrollpos > currentScrollPos) { 
      document.getElementById("tag-cloud").style.visibility = "visible";
      document.getElementById("tag-cloud").style.opacity = "1";
    } else {
      document.getElementById("tag-cloud").style.visibility = "hidden";
      document.getElementById("tag-cloud").style.opacity = "0";
    }
  }
  

  
  if (document.body.scrollTop > 1000 || document.documentElement.scrollTop > 1000) {
      document.getElementById("scroll-to-top").style.display = "inline";
      document.getElementById("scroll-to-top").style.visibility = "visible";
      document.getElementById("scroll-to-top").style.opacity = "1";
  } else {
      document.getElementById("scroll-to-top").style.visibility = "hidden";
      document.getElementById("scroll-to-top").style.opacity = "0";
  }
  
  prevScrollpos = currentScrollPos;
}


function topFunction() {
  document.body.scrollTop = 0; 
  document.documentElement.scrollTop = 0; 
}






if (document.getElementById("contents-list") !== null && document.getElementsByClassName("post-content").length !== 0) { 
  tocbot.init({
    
    tocSelector: '#contents-list',
    
    contentSelector: '.post-content',
    
    headingSelector: 'h1, h2, h3',
  });
}


</script>




</body>
</html>